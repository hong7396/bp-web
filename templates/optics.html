<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Physics Menu Prototype</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@700;500;400&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: #f7faf9;
    }
    .custom-scroll::-webkit-scrollbar {
      width: 8px;
      background: #e5e7eb;
    }
    .custom-scroll::-webkit-scrollbar-thumb {
      background: #cbd5e1;
      border-radius: 4px;
    }
  </style>
</head>
<body class="min-h-screen bg-[#f7faf9]">
  <nav class="w-full border-b border-gray-300 bg-white">
    <div class="max-w-7xl mx-auto flex items-center h-14 px-6">
      <div class="flex space-x-8">
        <a href="https://11f1-211-208-7-84.ngrok-free.app/heat" target="_blank" class="text-gray-900 font-medium text-lg px-2 py-1 hover:text-white hover:bg-blue-500 rounded transition">열전달</a>
        <a href="https://11f1-211-208-7-84.ngrok-free.app/optics" target="_blank" class="text-gray-900 font-medium text-lg px-2 py-1 hover:text-white hover:bg-blue-500 rounded transition">광학</a>
        <a href="https://11f1-211-208-7-84.ngrok-free.app/imaging" target="_blank" class="text-gray-900 font-medium text-lg px-2 py-1 hover:text-white hover:bg-blue-500 rounded transition">영상학</a>
      </div>
    </div>
  </nav>

  <main class="max-w-7xl mx-auto mt-6 border border-gray-400 rounded-lg bg-white shadow-sm overflow-hidden">
    <div class="flex h-[70vh] min-h-[500px]">
      <aside class="w-64 bg-gray-100 border-r border-gray-200 flex flex-col items-center py-8 px-4 custom-scroll overflow-y-auto">
        <h2 class="text-2xl font-bold text-blue-600 mb-6">Menu</h2>
        <div class="flex flex-col w-full space-y-3">
          <button class="menu-button w-full py-2 rounded bg-gray-200 text-gray-800 font-medium text-base shadow-sm border border-gray-300 hover:bg-blue-100 transition" data-id="snell">snell's law</button>
          <button class="menu-button w-full py-2 rounded bg-gray-200 text-gray-800 font-medium text-base shadow-sm border border-gray-300 hover:bg-blue-100 transition" data-id="a">a</button>
          <button class="menu-button w-full py-2 rounded bg-gray-200 text-gray-800 font-medium text-base shadow-sm border border-gray-300 hover:bg-blue-100 transition" data-id="b">b</button>
        </div>
      </aside>

      <section id="content-area" class="flex-1 bg-gray-50 p-10 flex items-center justify-center">
        <div class="text-gray-400 text-xl font-medium">메뉴를 선택해주세요</div>
      </section>
    </div>
  </main>

  <script>
    const calculators = {
      snell: `
        <section class='bg-blue-50 p-6 md:p-8 flex flex-col items-center justify-start rounded-lg shadow-md max-w-md w-full'>
          <div class='text-center mb-4'>
            <div class='text-xl font-semibold text-gray-700 mb-1'>n₁ · sin(θ₁) = n₂ · sin(θ₂)</div>
            <h2 class='text-2xl font-bold text-blue-800'>Snell's Law 계산기</h2>
          </div>
          <img src="/static/images/optics/snell.png" alt="Snell Law Diagram" class="mb-4 rounded shadow-md w-full max-w-xs">
          <label class='block mb-2 text-gray-700 font-medium'>어떤 값을 계산할까요?</label>
          <select id='target' class='w-full mb-4 px-4 py-2 rounded border border-gray-300 focus:ring-2 focus:ring-blue-400'>
            <option value='n1'>n₁ (입사쪽 굴절률)</option>
            <option value='n2'>n₂ (굴절쪽 굴절률)</option>
            <option value='theta1'>θ₁ (입사각, 도)</option>
            <option value='theta2'>θ₂ (굴절각, 도)</option>
          </select>
          <input id='n1' type='number' step='any' placeholder='n₁ 입력' class='mb-2 w-full px-4 py-2 border rounded focus:ring-2 focus:ring-blue-400'>
          <input id='n2' type='number' step='any' placeholder='n₂ 입력' class='mb-2 w-full px-4 py-2 border rounded focus:ring-2 focus:ring-blue-400'>
          <input id='theta1' type='number' step='any' placeholder='θ₁ 입력 (도)' class='mb-2 w-full px-4 py-2 border rounded focus:ring-2 focus:ring-blue-400'>
          <input id='theta2' type='number' step='any' placeholder='θ₂ 입력 (도)' class='mb-4 w-full px-4 py-2 border rounded focus:ring-2 focus:ring-blue-400'>
          <button onclick='calcSnell()' class='bg-blue-600 text-white px-6 py-2 rounded font-semibold hover:bg-blue-700 transition'>계산하기</button>
          <div id='snell-result' class='mt-4 text-lg font-medium text-gray-800'></div>
        </section>
      `,
      a: `<div class='text-2xl text-gray-700 font-bold'>a 계산기 준비 중입니다.</div>`,
      b: `<div class='text-2xl text-gray-700 font-bold'>b 계산기 준비 중입니다.</div>`
    };

    document.querySelectorAll(".menu-button").forEach(btn => {
      btn.addEventListener("click", () => {
        const id = btn.getAttribute("data-id");
        const content = calculators[id] || "<div>준비 중입니다.</div>";
        document.getElementById("content-area").innerHTML = content;
      });
    });

    function toRad(deg) {
      return deg * (Math.PI / 180);
    }

    function calcSnell() {
      const target = document.getElementById("target").value;
      const n1 = parseFloat(document.getElementById("n1").value);
      const n2 = parseFloat(document.getElementById("n2").value);
      const theta1 = parseFloat(document.getElementById("theta1").value);
      const theta2 = parseFloat(document.getElementById("theta2").value);

      let result = '';

      try {
        if (target === "n1") {
          if (isNaN(n2) || isNaN(theta1) || isNaN(theta2)) throw "값을 모두 입력하세요.";
          result = n2 * Math.sin(toRad(theta2)) / Math.sin(toRad(theta1));
          result = `계산된 n₁: ${result.toFixed(4)}`;
        } else if (target === "n2") {
          if (isNaN(n1) || isNaN(theta1) || isNaN(theta2)) throw "값을 모두 입력하세요.";
          result = n1 * Math.sin(toRad(theta1)) / Math.sin(toRad(theta2));
          result = `계산된 n₂: ${result.toFixed(4)}`;
        } else if (target === "theta1") {
          if (isNaN(n1) || isNaN(n2) || isNaN(theta2)) throw "값을 모두 입력하세요.";
          let sinTheta1 = n2 * Math.sin(toRad(theta2)) / n1;
          if (Math.abs(sinTheta1) > 1) throw "계산 불가능 (전반사)";
          result = Math.asin(sinTheta1) * (180 / Math.PI);
          result = `계산된 θ₁: ${result.toFixed(2)}°`;
        } else if (target === "theta2") {
          if (isNaN(n1) || isNaN(n2) || isNaN(theta1)) throw "값을 모두 입력하세요.";
          let sinTheta2 = n1 * Math.sin(toRad(theta1)) / n2;
          if (Math.abs(sinTheta2) > 1) throw "계산 불가능 (전반사)";
          result = Math.asin(sinTheta2) * (180 / Math.PI);
          result = `계산된 θ₂: ${result.toFixed(2)}°`;
        }
      } catch (e) {
        result = `❌ 오류: ${e}`;
      }

      document.getElementById("snell-result").innerText = result;
    }
  </script>
</body>
</html>
